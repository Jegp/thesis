\documentclass[a4paper,oneside]{memoir}
% Divide report into subfiles
\usepackage{subfiles}

\usepackage[english]{babel}
\usepackage[margin=1cm]{caption}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{wallpaper}
\usepackage{palatino}
\usepackage{hyperref}
\usepackage{csquotes}
\usepackage{fvextra}
\usepackage{xpatch}
\usepackage{amsmath}
\usepackage{bbm}
\usepackage{nameref}
\usepackage{url}

% tikz drawing
\usepackage{tikz}
\usetikzlibrary{shapes,arrows,matrix,chains,positioning,decorations.pathreplacing,arrows}
\usepackage{pgfplots}

% Listings
\usepackage{listings}
\usepackage{color}
\lstset{
  basicstyle=\small \ttfamily,
  numbers=left,
  frame=tb,
  mathescape
}

% Proofs
\usepackage{bussproofs}

% Floats and figures
\usepackage{float}
\usepackage{wrapfig}
\restylefloat{figure}
\usepackage{caption}
\DeclareCaptionLabelFormat{cont}{#1~#2\alph{ContinuedFloat}}
\captionsetup[ContinuedFloat]{labelformat=cont}
\usepackage{placeins}
\usepackage{pdfpages}

%linespacing
\usepackage{setspace}
\renewcommand{\baselinestretch}{1.1}

% Grammar
\usepackage{fancyvrb}

% Internal references
\usepackage{cleveref}

% Bibliography
\usepackage{biblatex}
\bibliography{bib}

% Promote sections and subsections
\setheadfoot{\onelineskip}{2\onelineskip}
\setheaderspaces{*}{1mm}{*}

% Index 
\usepackage{makeidx}
\makeindex

% Glossary
\usepackage[numberedsection=nameref, toc]{glossaries}
\usepackage[automake]{glossaries-extra}
\renewcommand{\glossarypreamble}{\label{sec:glossary}}
\makeglossaries
\include{glossary}

% TOC
\maxsecnumdepth{subsection}

% Chapter settings
\chapterstyle{default}

%%  Setup fancy style quotation
%%  ==================================================================
%\usepackage{tikz}
%\usepackage{framed}

%\newcommand*\quotefont{\fontfamily{fxl}} % selects Libertine for quote font

% Make commands for the quotes
%\newcommand*{\openquote}{\tikz[remember picture,overlay,xshift=-15pt,yshift=-10pt]
%     \node (OQ) {\quotefont\fontsize{60}{60}\selectfont``};\kern0pt}
%\newcommand*{\closequote}{\tikz[remember picture,overlay,xshift=15pt,yshift=5pt]
%     \node (CQ) {\quotefont\fontsize{60}{60}\selectfont''};}

% select a colour for the shading
%\definecolor{shadecolor}{rgb}{1,1,1}

% wrap everything in its own environment
%\newenvironment{shadequote}%
%{\begin{snugshade}\begin{quote}\openquote}
%{\hfill\closequote\end{quote}\end{snugshade}}

%%  Begin document
%%  ==================================================================
\begin{document}

%% Custom commands
%% ===================================================================
\newcommand{\obar}{%
    \mathrel{\reflectbox{\rotatebox[origin=c]{90}{$\ominus$}}}}

%%  Begin title page
%%  ==================================================================
    \thispagestyle{empty}
    \ULCornerWallPaper{1}{ku-coverpage/nat-farve.pdf}
    \ULCornerWallPaper{1}{ku-coverpage/diku-en.pdf}
    \begin{adjustwidth}{-3cm}{-1.5cm}
      \vspace*{3cm}
      \textbf{\Huge Modelling neural learning systems} \\
      \\[0.2cm]
      {\huge Cognitive models in third generation neural networks}\\
      \\[1.6cm]
      {\Large MSc thesis in Computer Science}
      \\[9cm]
      \begin{tabbing}
      \textbf{\Large Author} \\
      Jens Egholm Pedersen \hspace{1cm} \= \texttt{<xtp778@alumni.ku.dk>} \\
      \\[1cm]
      \textbf{\Large Supervisor} \\
      Martin Elsman \hspace{1cm} \= \texttt{<mael@di.ku.dk>}
      \end{tabbing}
    \end{adjustwidth}

    \newpage

    \ClearWallPaper
%%  ==================================================================
%%  End title page

\renewcommand\cftchapteraftersnumb{\normalfont}
\renewcommand\cftbeforechapterskip{5pt plus 1pt}

\frontmatter

%\begin{abstract}
%TODO
%\end{abstract}

\pagebreak

\setcounter{tocdepth}{2}
\tableofcontents*
\newpage

\begin{comment}

\section{How to read this thesis}
\section{Acknowledgements}
Kerem for providing internet.
% TODO: Add statement that it's my own work
% TODO: Add statement that Christian Pehle has contributed to Myelin
\end{comment}

\mainmatter

\chapter{Introduction} \label{sec:intro}
  \subfile{chapters/introduction}

\chapter{Theory} \label{sec:theory}
  \subfile{chapters/theory}

\chapter{A DSL for neural networks modelling} \label{sec:dsl}
  \subfile{chapters/dsl}

\chapter{Experimental setup} \label{sec:experiment}
  \subfile{chapters/experiment}

\chapter{Data}
  \subfile{chapters/data}

\begin{comment}
\chapter{Analysis} \label{sec:analysis}
  %\section{Futhark}
  %\section{NEST}
  %\section{BrainScaleS}

%\chapter{Analysis}
%  \section{Experiment results}
%  \subsection{Futhark}
%  \subsection{Nest}
%  \subsection{BrainScaleS}
%  \section{Comparison of learning}
%  \section{Adaptability and robustness} % How is this useful for the REF model?

\chapter{Discussion} \label{sec:discussion}
%  % TODO: Partial training of networks
%  \section{Validity}
%  \section{REF similarity}
%  \section{Future work}

\end{comment}

\appendix
\chapter{Transfer functions for spiking neurons} \label{app:transfer}
\include{appendices/transfer}
\chapter{Volr implementation code} \label{app:implementation}
  \include{appendices/volr}
\chapter{Neuron rate models} \label{app:verification}
  \include{appendices/verification}
\chapter{Experiment details} \label{app:experiment}
  \include{appendices/data.tex}

\backmatter

\printglossary

\printbibliography
 
\printindex
\end{document}
